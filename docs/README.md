# Nuwa 项目文档

本目录包含 Nuwa 项目的详细技术文档，帮助开发者理解架构设计和进行系统优化。

## 📚 文档索引

### [CLASS_DIAGRAMS.md](./CLASS_DIAGRAMS.md)
**完整的类图与架构设计文档**

- 🎭 编排引擎类图（IntelligentRouter、TaskPlanner）
- 🤖 AI管理模块类图（AIManager、AI Providers）
- 🔌 插件系统类图（PluginManager、PluginDiscovery等）
- 📋 任务处理类图（TaskHandler、StepHandler、TaskExecutor）
- 📡 MCP协议类图（MCPServer、MCPClient）
- 🌐 API接口层类图（各种Router）
- 🔧 配置管理和依赖注入类图
- 📊 整体系统架构关系图
- 🔍 架构优化建议

### [MODULE_ANALYSIS.md](./MODULE_ANALYSIS.md)
**深入的模块实现分析文档**

- 📁 每个模块的详细目录结构分析
- 🧠 核心类的关键方法详解
- 🔍 关键业务流程源码分析
- 📊 性能关键点识别
- 🎯 具体的架构改进建议

## 🎯 使用指南

### 架构优化流程

1. **现状分析** - 阅读 `CLASS_DIAGRAMS.md` 了解当前架构
2. **深入理解** - 通过 `MODULE_ANALYSIS.md` 掌握实现细节  
3. **问题识别** - 根据类图识别耦合度和职责分离问题
4. **制定方案** - 参考优化建议制定重构计划
5. **逐步重构** - 按模块进行渐进式重构

### 开发参考

**新功能开发**：
- 参考类图确定功能放置位置
- 遵循现有的设计模式和架构原则
- 考虑与现有模块的集成方式

**Bug修复**：
- 通过类图快速定位相关组件
- 理解模块间的依赖关系
- 避免修改时破坏现有架构

**性能优化**：
- 参考性能关键点分析
- 识别瓶颈和优化机会
- 制定针对性的优化策略

## 🔧 架构关键点

### 核心设计模式

- **依赖注入** - 通过 DI Container 管理组件依赖
- **策略模式** - AI Provider 的多实现支持
- **观察者模式** - 任务状态变化通知
- **工厂模式** - 插件动态加载和创建
- **代理模式** - MCP 协议通信代理

### 重要架构边界

- **API层** ↔️ **业务层** - 通过依赖注入解耦
- **业务层** ↔️ **数据层** - 通过 Repository 模式分离
- **插件** ↔️ **核心** - 通过 MCP 协议隔离
- **AI服务** ↔️ **业务** - 通过接口抽象解耦

### 扩展点识别

- **新AI Provider** - 实现 `BaseAIProvider` 接口
- **新插件类型** - 遵循 MCP 协议规范  
- **新API接口** - 添加新的 Router
- **新中间件** - 实现标准中间件接口
- **新任务类型** - 扩展 TaskHandler 处理逻辑

## 📋 文档维护

### 更新原则

1. **代码变更同步更新** - 重大架构变更必须更新文档
2. **定期审查** - 每月检查文档与代码的一致性  
3. **版本标记** - 重要版本变更时标记文档版本

### 贡献指南

欢迎贡献文档改进：

- 发现文档与实际代码不一致时，请提交更新
- 添加新的架构分析或优化建议
- 完善现有类图或添加新的视角
- 提供实际的重构经验和最佳实践

---

*本文档体系旨在为 Nuwa 项目的架构理解和优化提供全面支持。建议开发团队定期参考和更新。*